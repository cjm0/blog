import{_ as n,o as a,c as s,e}from"./app.6da7124e.js";const o={},i=e(`<h1 id="mongodb-\u53EA\u8BFB\u6743\u9650\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#mongodb-\u53EA\u8BFB\u6743\u9650\u8BBE\u7F6E" aria-hidden="true">#</a> MongoDB \u53EA\u8BFB\u6743\u9650\u8BBE\u7F6E</h1><h2 id="\u76F8\u5173\u547D\u4EE4" tabindex="-1"><a class="header-anchor" href="#\u76F8\u5173\u547D\u4EE4" aria-hidden="true">#</a> \u76F8\u5173\u547D\u4EE4</h2><p>\u67E5\u770B\u672C\u673A mongodb \u7248\u672C\uFF1A<code>mongo -version</code></p><p>\u67E5\u770B\u672C\u673A\u8FD0\u884C\u7684 mongodb\uFF1A<code>ps aux | grep mongodb</code></p><p>\u8FDE\u63A5\u672C\u673A\u6570\u636E\u5E93\uFF1A<code>mongo localhost:27017</code></p><p>\u7528\u8D26\u53F7\u5BC6\u7801\u8FDE\u63A5\u672C\u673A\u6570\u636E\u5E93\uFF1A<code>mongo -port 27017 -u &#39;admin&#39; -p &#39;admin_root_test&#39;</code></p><p>\u663E\u793A\u6570\u636E\u5E93\u5217\u8868\uFF1A<code>show dbs</code></p><p>\u5207\u6362/\u521B\u5EFA\u6570\u636E\u5E93\uFF1A<code>use mytest</code></p><p>\u5220\u9664\u5F53\u524D\u6570\u636E\u5E93\uFF1A<code>db.dropDatabase()</code></p><p>\u521B\u5EFA\u96C6\u5408\uFF1A<code>db.createCollection(&#39;book&#39;)</code></p><p>\u663E\u793A\u5F53\u524D\u6240\u6709\u7528\u6237\uFF1A<code>show users</code></p><p>\u5220\u9664\u7528\u6237\uFF1A<code>db.dropUser(&#39;myread&#39;)</code></p><p>\u6740\u6B7B\u8FD0\u884C\u7684 mongodb\uFF1A<code>kill pid</code></p><h2 id="\u53EA\u8BFB\u6743\u9650\u8BBE\u7F6E" tabindex="-1"><a class="header-anchor" href="#\u53EA\u8BFB\u6743\u9650\u8BBE\u7F6E" aria-hidden="true">#</a> \u53EA\u8BFB\u6743\u9650\u8BBE\u7F6E</h2><ol><li>\u542F\u52A8 mongodb \u670D\u52A1</li></ol><p>mac\uFF1A<code>mongod --dbpath /usr/local/var/mongodb --logpath /usr/local/var/log/mongodb/mongo.log --fork</code></p><p>linux\uFF1A<code>systemctl start mongod</code> \u6216 <code>service mongod start</code></p><ol start="2"><li>\u8FDB\u5165\u547D\u4EE4</li></ol><p><code>mongo localhost:27017</code></p><ol start="3"><li>\u521B\u5EFA\u7BA1\u7406\u5458\u8D26\u53F7</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>use admin
db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span>user:<span class="token string">&#39;admin&#39;</span>, pwd:<span class="token string">&#39;admin_root_test&#39;</span>,roles:<span class="token punctuation">[</span><span class="token punctuation">{</span> role: <span class="token string">&#39;root&#39;</span>, db: <span class="token string">&#39;admin&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="4"><li>\u5173\u95ED mongodb</li></ol><p><code>db.adminCommand( { shutdown: 1 } )</code></p><p>\u6216\u8005</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">ps</span> -ef <span class="token operator">|</span> <span class="token function">grep</span> mongodb // \u67E5\u770B momgodb pid
<span class="token function">kill</span> pid
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="5"><li>\u7528\u6743\u9650\u8BA4\u8BC1\u91CD\u5F00</li></ol><p><code>mongod --auth --dbpath /usr/local/var/mongodb --logpath /usr/local/var/log/mongodb/mongo.log --fork</code></p><p>\u6216\u8005</p><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code><span class="token function">vi</span> /etc/mongod.conf
security:
  authorization: enabled
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="6"><li>\u518D\u6B21\u8FDB\u5165\u547D\u4EE4</li></ol><p><code>mongo -port 27017 -u &#39;admin&#39; -p &#39;admin_root_test&#39;</code></p><ol start="7"><li>\u521B\u5EFA\u53EA\u8BFB\u7528\u6237</li></ol><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>use mytest // \u521B\u5EFA\u6570\u636E\u5E93
db.createCollection<span class="token punctuation">(</span><span class="token string">&#39;book&#39;</span><span class="token punctuation">)</span> // \u521B\u5EFA\u96C6\u5408\uFF0C\u4EE5\u65B9\u4FBF show dbs \u80FD\u663E\u793A\u6570\u636E\u5E93
db.createUser<span class="token punctuation">(</span><span class="token punctuation">{</span> user: <span class="token string">&#39;myread&#39;</span>, pwd: <span class="token string">&#39;myread_pwd&#39;</span>, roles: <span class="token punctuation">[</span><span class="token punctuation">{</span> role: <span class="token string">&#39;read&#39;</span>, db: <span class="token string">&#39;mytest&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">]</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u89D2\u8272\u6743\u9650\u89E3\u8BFB" tabindex="-1"><a class="header-anchor" href="#\u89D2\u8272\u6743\u9650\u89E3\u8BFB" aria-hidden="true">#</a> \u89D2\u8272\u6743\u9650\u89E3\u8BFB</h2><p>Built-In Roles\uFF08\u5185\u7F6E\u89D2\u8272\uFF09\uFF1A</p><ol><li><p>\u6570\u636E\u5E93\u7528\u6237\u89D2\u8272\uFF1Aread\u3001readWrite\u3002</p></li><li><p>\u6570\u636E\u5E93\u7BA1\u7406\u89D2\u8272\uFF1AdbAdmin\u3001dbOwner\u3001userAdmin\u3002</p></li><li><p>\u96C6\u7FA4\u7BA1\u7406\u89D2\u8272\uFF1AclusterAdmin\u3001clusterManager\u3001clusterMonitor\u3001hostManager\u3002</p></li><li><p>\u5907\u4EFD\u6062\u590D\u89D2\u8272\uFF1Abackup\u3001restore\u3002</p></li><li><p>\u6240\u6709\u6570\u636E\u5E93\u89D2\u8272\uFF1AreadAnyDatabase\u3001readWriteAnyDatabase\u3001userAdminAnyDatabase\u3001dbAdminAnyDatabase\u3002</p></li><li><p>\u8D85\u7EA7\u7528\u6237\u89D2\u8272\uFF1Aroot \u8FD8\u6709\u51E0\u4E2A\u89D2\u8272\u95F4\u63A5\u6216\u76F4\u63A5\u63D0\u4F9B\u4E86\u7CFB\u7EDF\u8D85\u7EA7\u7528\u6237\u7684\u8BBF\u95EE\uFF08dbOwner \u3001userAdmin\u3001userAdminAnyDatabase\uFF09\u3002</p></li><li><p>\u5185\u90E8\u89D2\u8272\uFF1A__system\u3002</p></li></ol><p>\u5177\u4F53\u89D2\u8272\uFF1A</p><ul><li><p>Read\uFF1A\u5141\u8BB8\u7528\u6237\u8BFB\u53D6\u6307\u5B9A\u6570\u636E\u5E93\u3002</p></li><li><p>readWrite\uFF1A\u5141\u8BB8\u7528\u6237\u8BFB\u5199\u6307\u5B9A\u6570\u636E\u5E93\u3002</p></li><li><p>dbAdmin\uFF1A\u5141\u8BB8\u7528\u6237\u5728\u6307\u5B9A\u6570\u636E\u5E93\u4E2D\u6267\u884C\u7BA1\u7406\u51FD\u6570\uFF0C\u5982\u7D22\u5F15\u521B\u5EFA\u3001\u5220\u9664\uFF0C\u67E5\u770B\u7EDF\u8BA1\u6216\u8BBF\u95EE\u3002</p></li><li><p>userAdmin\uFF1A\u5141\u8BB8\u7528\u6237\u5411 system.users \u96C6\u5408\u5199\u5165\uFF0C\u53EF\u4EE5\u627E\u6307\u5B9A\u6570\u636E\u5E93\u91CC\u521B\u5EFA\u3001\u5220\u9664\u548C\u7BA1\u7406\u7528\u6237\u3002</p></li><li><p>clusterAdmin\uFF1A\u53EA\u5728 admin \u6570\u636E\u5E93\u4E2D\u53EF\u7528\uFF0C\u8D4B\u4E88\u7528\u6237\u6240\u6709\u5206\u7247\u548C\u590D\u5236\u96C6\u76F8\u5173\u51FD\u6570\u7684\u7BA1\u7406\u6743\u9650\u3002</p></li><li><p>readAnyDatabase\uFF1A\u53EA\u5728 admin \u6570\u636E\u5E93\u4E2D\u53EF\u7528\uFF0C\u8D4B\u4E88\u7528\u6237\u6240\u6709\u6570\u636E\u5E93\u7684\u8BFB\u6743\u9650\u3002</p></li><li><p>readWriteAnyDatabase\uFF1A\u53EA\u5728 admin \u6570\u636E\u5E93\u4E2D\u53EF\u7528\uFF0C\u8D4B\u4E88\u7528\u6237\u6240\u6709\u6570\u636E\u5E93\u7684\u8BFB\u5199\u6743\u9650\u3002</p></li><li><p>userAdminAnyDatabase\uFF1A\u53EA\u5728 admin \u6570\u636E\u5E93\u4E2D\u53EF\u7528\uFF0C\u8D4B\u4E88\u7528\u6237\u6240\u6709\u6570\u636E\u5E93\u7684 userAdmin \u6743\u9650\u3002</p></li><li><p>dbAdminAnyDatabase\uFF1A\u53EA\u5728 admin \u6570\u636E\u5E93\u4E2D\u53EF\u7528\uFF0C\u8D4B\u4E88\u7528\u6237\u6240\u6709\u6570\u636E\u5E93\u7684 dbAdmin \u6743\u9650\u3002</p></li><li><p>root\uFF1A\u53EA\u5728 admi n\u6570\u636E\u5E93\u4E2D\u53EF\u7528\u3002\u8D85\u7EA7\u8D26\u53F7\uFF0C\u8D85\u7EA7\u6743\u9650\u3002</p></li></ul>`,38),d=[i];function l(t,p){return a(),s("div",null,d)}var r=n(o,[["render",l],["__file","power.html.vue"]]);export{r as default};
