<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="keywords" content="前端一锅煮,从一次攻击看前端安全问题"><link rel="icon" href="/img/logo.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileColor" content="#000000"><title>从一次攻击看前端安全问题 | 前端一锅煮</title><meta name="description" content="从一次攻击看前端安全问题">
    <link rel="modulepreload" href="/blog/assets/app.6da7124e.js"><link rel="modulepreload" href="/blog/assets/security.html.d44ee077.js"><link rel="modulepreload" href="/blog/assets/security.html.80097fc7.js"><link rel="prefetch" href="/blog/assets/index.html.6d01a2cb.js"><link rel="prefetch" href="/blog/assets/index.html.c356b4a5.js"><link rel="prefetch" href="/blog/assets/cola.html.e4806231.js"><link rel="prefetch" href="/blog/assets/quick_app.html.fe111499.js"><link rel="prefetch" href="/blog/assets/webview.html.8973f23c.js"><link rel="prefetch" href="/blog/assets/add.html.6ca15e66.js"><link rel="prefetch" href="/blog/assets/base_summary.html.110ffd64.js"><link rel="prefetch" href="/blog/assets/fn.html.470922ad.js"><link rel="prefetch" href="/blog/assets/promise_all.html.503af5ab.js"><link rel="prefetch" href="/blog/assets/prototype.html.c216cc4e.js"><link rel="prefetch" href="/blog/assets/three.html.c55c611a.js"><link rel="prefetch" href="/blog/assets/bfc.html.12f2f1e5.js"><link rel="prefetch" href="/blog/assets/css_layout_two.html.ba63e39b.js"><link rel="prefetch" href="/blog/assets/ai.html.8d3a8611.js"><link rel="prefetch" href="/blog/assets/index.html.f249b277.js"><link rel="prefetch" href="/blog/assets/aglie.html.f8897adf.js"><link rel="prefetch" href="/blog/assets/app.html.4b9ec687.js"><link rel="prefetch" href="/blog/assets/code_review.html.bc3a99c0.js"><link rel="prefetch" href="/blog/assets/confidence.html.0d77def2.js"><link rel="prefetch" href="/blog/assets/discipline.html.12aa4483.js"><link rel="prefetch" href="/blog/assets/feday.html.43f3a4ee.js"><link rel="prefetch" href="/blog/assets/love.html.2dcaf6fa.js"><link rel="prefetch" href="/blog/assets/money_rate.html.280fa8d1.js"><link rel="prefetch" href="/blog/assets/need_work.html.9fd86d8c.js"><link rel="prefetch" href="/blog/assets/plan.html.55213dc7.js"><link rel="prefetch" href="/blog/assets/soul.html.768e71af.js"><link rel="prefetch" href="/blog/assets/think.html.70b05155.js"><link rel="prefetch" href="/blog/assets/time.html.79f32616.js"><link rel="prefetch" href="/blog/assets/index.html.11af586a.js"><link rel="prefetch" href="/blog/assets/emoji.html.b9989d2d.js"><link rel="prefetch" href="/blog/assets/es6.html.13ed4360.js"><link rel="prefetch" href="/blog/assets/fe.html.3b3d8617.js"><link rel="prefetch" href="/blog/assets/fe_design.html.d5b0b873.js"><link rel="prefetch" href="/blog/assets/fe_server_check.html.4d7b9142.js"><link rel="prefetch" href="/blog/assets/fe_server_name.html.752ce7ca.js"><link rel="prefetch" href="/blog/assets/fe_up.html.29040e77.js"><link rel="prefetch" href="/blog/assets/npm.html.e72aa54c.js"><link rel="prefetch" href="/blog/assets/npm_run.html.98aaa461.js"><link rel="prefetch" href="/blog/assets/project_template.html.288c3dcc.js"><link rel="prefetch" href="/blog/assets/serviceWorker.html.4000b715.js"><link rel="prefetch" href="/blog/assets/sh.html.5f1c0c24.js"><link rel="prefetch" href="/blog/assets/source_link.html.e2fe27e1.js"><link rel="prefetch" href="/blog/assets/sso.html.1d80181a.js"><link rel="prefetch" href="/blog/assets/ts.html.cd7c6443.js"><link rel="prefetch" href="/blog/assets/underline.html.4767bdd2.js"><link rel="prefetch" href="/blog/assets/updateService.html.e5b5e0fd.js"><link rel="prefetch" href="/blog/assets/webpack4.html.ad53dad8.js"><link rel="prefetch" href="/blog/assets/http.html.c0b3835f.js"><link rel="prefetch" href="/blog/assets/loop.html.7ee50776.js"><link rel="prefetch" href="/blog/assets/onion.html.0b6e071f.js"><link rel="prefetch" href="/blog/assets/perf.html.e8293673.js"><link rel="prefetch" href="/blog/assets/power.html.8c0a01bb.js"><link rel="prefetch" href="/blog/assets/process.html.621f9d31.js"><link rel="prefetch" href="/blog/assets/v8.html.ea1267dc.js"><link rel="prefetch" href="/blog/assets/hb.html.183ccde9.js"><link rel="prefetch" href="/blog/assets/read.html.83444f6d.js"><link rel="prefetch" href="/blog/assets/mac.html.c363b9d0.js"><link rel="prefetch" href="/blog/assets/mac_down.html.4d7a51b5.js"><link rel="prefetch" href="/blog/assets/maclist.html.7fcc92e6.js"><link rel="prefetch" href="/blog/assets/vscode.html.35f0b950.js"><link rel="prefetch" href="/blog/assets/vue_reload.html.50a70fdb.js"><link rel="prefetch" href="/blog/assets/vue_ui_contrast.html.c0f397da.js"><link rel="prefetch" href="/blog/assets/api.html.3ccaacf2.js"><link rel="prefetch" href="/blog/assets/config.html.4b16ab9d.js"><link rel="prefetch" href="/blog/assets/guide.html.f8df3fc6.js"><link rel="prefetch" href="/blog/assets/theme.html.a17dc900.js"><link rel="prefetch" href="/blog/assets/404.html.ab74ef0a.js"><link rel="prefetch" href="/blog/assets/index.html.0888740a.js"><link rel="prefetch" href="/blog/assets/index.html.ccc41012.js"><link rel="prefetch" href="/blog/assets/cola.html.8bdcad90.js"><link rel="prefetch" href="/blog/assets/quick_app.html.369ea008.js"><link rel="prefetch" href="/blog/assets/webview.html.4d28ba0d.js"><link rel="prefetch" href="/blog/assets/add.html.35f80863.js"><link rel="prefetch" href="/blog/assets/base_summary.html.908bfee7.js"><link rel="prefetch" href="/blog/assets/fn.html.ef8c25e1.js"><link rel="prefetch" href="/blog/assets/promise_all.html.7cc3c39b.js"><link rel="prefetch" href="/blog/assets/prototype.html.f3efd717.js"><link rel="prefetch" href="/blog/assets/three.html.62508157.js"><link rel="prefetch" href="/blog/assets/bfc.html.378b7eb8.js"><link rel="prefetch" href="/blog/assets/css_layout_two.html.4236999d.js"><link rel="prefetch" href="/blog/assets/ai.html.e4065256.js"><link rel="prefetch" href="/blog/assets/index.html.e4ef4543.js"><link rel="prefetch" href="/blog/assets/aglie.html.e7dccfaf.js"><link rel="prefetch" href="/blog/assets/app.html.b2b12e5c.js"><link rel="prefetch" href="/blog/assets/code_review.html.2cf45649.js"><link rel="prefetch" href="/blog/assets/confidence.html.44a61c4b.js"><link rel="prefetch" href="/blog/assets/discipline.html.15f00bd9.js"><link rel="prefetch" href="/blog/assets/feday.html.f553c0b8.js"><link rel="prefetch" href="/blog/assets/love.html.3a5a52d3.js"><link rel="prefetch" href="/blog/assets/money_rate.html.b84ac952.js"><link rel="prefetch" href="/blog/assets/need_work.html.f96a41de.js"><link rel="prefetch" href="/blog/assets/plan.html.843657a6.js"><link rel="prefetch" href="/blog/assets/soul.html.cfb53fae.js"><link rel="prefetch" href="/blog/assets/think.html.1c980e83.js"><link rel="prefetch" href="/blog/assets/time.html.ae37d48b.js"><link rel="prefetch" href="/blog/assets/index.html.32c2cb21.js"><link rel="prefetch" href="/blog/assets/emoji.html.9f90cc4b.js"><link rel="prefetch" href="/blog/assets/es6.html.19402800.js"><link rel="prefetch" href="/blog/assets/fe.html.829d0ed8.js"><link rel="prefetch" href="/blog/assets/fe_design.html.0ebf9f0f.js"><link rel="prefetch" href="/blog/assets/fe_server_check.html.4683b7b1.js"><link rel="prefetch" href="/blog/assets/fe_server_name.html.4509d936.js"><link rel="prefetch" href="/blog/assets/fe_up.html.dbd34ebc.js"><link rel="prefetch" href="/blog/assets/npm.html.18fcb0c1.js"><link rel="prefetch" href="/blog/assets/npm_run.html.e7bf9355.js"><link rel="prefetch" href="/blog/assets/project_template.html.9d409a08.js"><link rel="prefetch" href="/blog/assets/serviceWorker.html.c831498e.js"><link rel="prefetch" href="/blog/assets/sh.html.3eac8d25.js"><link rel="prefetch" href="/blog/assets/source_link.html.ddd0787b.js"><link rel="prefetch" href="/blog/assets/sso.html.1c880d53.js"><link rel="prefetch" href="/blog/assets/ts.html.14acd559.js"><link rel="prefetch" href="/blog/assets/underline.html.89d47386.js"><link rel="prefetch" href="/blog/assets/updateService.html.c0e25538.js"><link rel="prefetch" href="/blog/assets/webpack4.html.fbb2a1be.js"><link rel="prefetch" href="/blog/assets/http.html.bade9cd1.js"><link rel="prefetch" href="/blog/assets/loop.html.6be584fc.js"><link rel="prefetch" href="/blog/assets/onion.html.7057f780.js"><link rel="prefetch" href="/blog/assets/perf.html.c6e11b1b.js"><link rel="prefetch" href="/blog/assets/power.html.600609ae.js"><link rel="prefetch" href="/blog/assets/process.html.ce6edbf4.js"><link rel="prefetch" href="/blog/assets/v8.html.a2ea5e36.js"><link rel="prefetch" href="/blog/assets/hb.html.a487989f.js"><link rel="prefetch" href="/blog/assets/read.html.69d44037.js"><link rel="prefetch" href="/blog/assets/mac.html.66f12713.js"><link rel="prefetch" href="/blog/assets/mac_down.html.cf3721e9.js"><link rel="prefetch" href="/blog/assets/maclist.html.282230ed.js"><link rel="prefetch" href="/blog/assets/vscode.html.a96c48ed.js"><link rel="prefetch" href="/blog/assets/vue_reload.html.79fd663c.js"><link rel="prefetch" href="/blog/assets/vue_ui_contrast.html.44daba36.js"><link rel="prefetch" href="/blog/assets/api.html.f52ab485.js"><link rel="prefetch" href="/blog/assets/config.html.5ee8988d.js"><link rel="prefetch" href="/blog/assets/guide.html.7d6e4938.js"><link rel="prefetch" href="/blog/assets/theme.html.ada8587b.js"><link rel="prefetch" href="/blog/assets/404.html.fa4ec67a.js"><link rel="prefetch" href="/blog/assets/404.389b8e98.js"><link rel="prefetch" href="/blog/assets/Layout.bbf94219.js"><link rel="prefetch" href="/blog/assets/vEmoji.f4f2da1c.js"><link rel="prefetch" href="/blog/assets/vHome.915a7d14.js"><link rel="prefetch" href="/blog/assets/vLife.c0039bb2.js"><link rel="prefetch" href="/blog/assets/vList.efc7a95f.js"><link rel="prefetch" href="/blog/assets/index.0e8935cb.js">
    <link rel="stylesheet" href="/blog/assets/style.04020ca0.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><!----><span class="site-name can-hide">前端一锅煮</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/list/" class="" aria-label="技术文章"><!--[--><!--]--> 技术文章 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/life/" class="" aria-label="生活感悟"><!--[--><!--]--> 生活感悟 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/about/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="VuePress笔记"><span class="title">VuePress笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="VuePress笔记"><span class="title">VuePress笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/guide" class="" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/api" class="" aria-label="语法"><!--[--><!--]--> 语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/config" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/theme" class="" aria-label="主题"><!--[--><!--]--> 主题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/cjm0/blog.git" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/list/" class="" aria-label="技术文章"><!--[--><!--]--> 技术文章 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/life/" class="" aria-label="生活感悟"><!--[--><!--]--> 生活感悟 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/about/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="VuePress笔记"><span class="title">VuePress笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="VuePress笔记"><span class="title">VuePress笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/guide" class="" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/api" class="" aria-label="语法"><!--[--><!--]--> 语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/config" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/theme" class="" aria-label="主题"><!--[--><!--]--> 主题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/cjm0/blog.git" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">从一次攻击看前端安全问题 <!----></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/page/node/security.html#xss" class="router-link-active router-link-exact-active sidebar-item" aria-label="XSS"><!--[--><!--]--> XSS <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/page/node/security.html#reflected-xss" class="router-link-active router-link-exact-active sidebar-item" aria-label="Reflected XSS"><!--[--><!--]--> Reflected XSS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/node/security.html#stored-xss" class="router-link-active router-link-exact-active sidebar-item" aria-label="Stored XSS"><!--[--><!--]--> Stored XSS <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/node/security.html#jsonp-xss" class="router-link-active router-link-exact-active sidebar-item" aria-label="JSONP XSS"><!--[--><!--]--> JSONP XSS <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/page/node/security.html#csrf" class="router-link-active router-link-exact-active sidebar-item" aria-label="CSRF"><!--[--><!--]--> CSRF <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/node/security.html#钓鱼攻击" class="router-link-active router-link-exact-active sidebar-item" aria-label="钓鱼攻击"><!--[--><!--]--> 钓鱼攻击 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/page/node/security.html#url-钓鱼" class="router-link-active router-link-exact-active sidebar-item" aria-label="url 钓鱼"><!--[--><!--]--> url 钓鱼 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/node/security.html#图片钓鱼" class="router-link-active router-link-exact-active sidebar-item" aria-label="图片钓鱼"><!--[--><!--]--> 图片钓鱼 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/node/security.html#iframe-钓鱼" class="router-link-active router-link-exact-active sidebar-item" aria-label="iframe 钓鱼"><!--[--><!--]--> iframe 钓鱼 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/page/node/security.html#hpp-攻击" class="router-link-active router-link-exact-active sidebar-item" aria-label="HPP 攻击"><!--[--><!--]--> HPP 攻击 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/node/security.html#中间人攻击" class="router-link-active router-link-exact-active sidebar-item" aria-label="中间人攻击"><!--[--><!--]--> 中间人攻击 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/node/security.html#防御总结" class="router-link-active router-link-exact-active sidebar-item" aria-label="防御总结"><!--[--><!--]--> 防御总结 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/node/security.html#ssl-安全检测" class="router-link-active router-link-exact-active sidebar-item" aria-label="SSL 安全检测"><!--[--><!--]--> SSL 安全检测 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="从一次攻击看前端安全问题" tabindex="-1"><a class="header-anchor" href="#从一次攻击看前端安全问题" aria-hidden="true">#</a> 从一次攻击看前端安全问题</h1><p>最近网站遭遇了一次 CSRF 攻击，短信调用接口被第三方调用导致发出大量无效短信，后来经过接口签名和 IP 封禁解决。今天就来详细学习下前端领域的安全问题。</p><p>Web 应用中存在很多安全风险，这些风险会被攻击者利用，轻则篡改网页内容，重则窃取网站内部数据，更为严重的则是在网页中植入恶意代码，使得用户受到侵害。常见的安全漏洞如下：</p><ul><li><p>XSS 攻击：对 Web 页面注入脚本，使用 JavaScript 窃取用户信息，诱导用户操作。</p></li><li><p>CSRF 攻击：伪造用户请求向网站发起恶意请求。</p></li><li><p>钓鱼攻击：利用网站的跳转链接或者图片制造钓鱼陷阱。</p></li><li><p>HTTP 参数污染：利用对参数格式验证的不完善，对服务器进行参数注入攻击。</p></li><li><p>远程代码执行：用户通过浏览器提交执行命令，由于服务器端没有针对执行函数做过滤，导致在没有指定绝对路径的情况下就执行命令。</p></li></ul><h2 id="xss" tabindex="-1"><a class="header-anchor" href="#xss" aria-hidden="true">#</a> XSS</h2><p>XSS（cross-site scripting 跨域脚本攻击）攻击是最常见的 Web 攻击，其重点是『跨域』和『客户端执行』。</p><p>XSS 攻击一般分为两类：Reflected XSS（反射型的 XSS 攻击）和 Stored XSS（存储型的 XSS 攻击）。</p><h3 id="reflected-xss" tabindex="-1"><a class="header-anchor" href="#reflected-xss" aria-hidden="true">#</a> Reflected XSS</h3><p>反射型的 XSS 攻击，主要是由于服务端接收到客户端的不安全输入，在客户端触发执行从而发起 Web 攻击。比如：在某购物网站搜索物品，搜索结果会显示搜索的关键词。搜索关键词填入<code>&lt;script&gt;alert(&#39;handsome boy&#39;)&lt;/script&gt;</code>，点击搜索。页面没有对关键词进行过滤，这段代码就会直接在页面上执行，弹出 alert。此攻击需要用户触发执行。</p><p>防御措施：不要信任用户的任何输入，对用户输入全部做过滤处理。转义 &lt;&gt;、过滤掉双引号，单引号，阻止靠元素属性来触发事件执行脚本。</p><h3 id="stored-xss" tabindex="-1"><a class="header-anchor" href="#stored-xss" aria-hidden="true">#</a> Stored XSS</h3><p>基于存储的 XSS 攻击，是通过提交带有恶意脚本的内容存储在服务器上，当其他人看到这些内容时发起 Web 攻击。一般提交的内容都是通过一些富文本编辑器编辑的，很容易插入危险代码。存在于网页的数据库内，不需要用户触发。</p><p>防御措施：不信任用户的输入，可对属性、域名做过滤，后端不可信任前端输入，需要再次过滤。</p><h3 id="jsonp-xss" tabindex="-1"><a class="header-anchor" href="#jsonp-xss" aria-hidden="true">#</a> JSONP XSS</h3><p>JSONP 的 callback 参数非常危险，他有两种风险可能导致 XSS。</p><ol><li><p>callback 参数意外截断 js 代码，特殊字符单引号双引号，换行符均存在风险。</p></li><li><p>callback 参数恶意添加标签（如 <code>&lt;script&gt;</code> ），造成 XSS 漏洞。</p></li></ol><p>防御措施：限制 callback 函数名词最长 50 个字符，callback 函数名只允许 [, ]，a-zA-Z0123456789_, $，.，防止一般的 XSS，utf-7 XSS等攻击。</p><h2 id="csrf" tabindex="-1"><a class="header-anchor" href="#csrf" aria-hidden="true">#</a> CSRF</h2><p>CSRF（Cross-site request forgery 跨站请求伪造，也被称为 One Click Attack 或者 Session Riding，通常缩写为 CSRF 或者 XSRF，是一种对网站的恶意利用。CSRF 攻击会对网站发起恶意伪造的请求，严重影响网站的安全。</p><p>防御措施：</p><ol><li><p>前后端接口做签名并设置过期时间，防止第三方调用。</p></li><li><p>后端验证请求的 referer 来源。</p></li><li><p>把恶意请求 IP 加入黑名单。</p></li><li><p>限制请求频率，超过正常频率，明显接口恶意调用的，锁死 IP。</p></li></ol><h2 id="钓鱼攻击" tabindex="-1"><a class="header-anchor" href="#钓鱼攻击" aria-hidden="true">#</a> 钓鱼攻击</h2><p>钓鱼有多种方式，这里介绍 url 钓鱼、图片钓鱼和 iframe 钓鱼。</p><h3 id="url-钓鱼" tabindex="-1"><a class="header-anchor" href="#url-钓鱼" aria-hidden="true">#</a> url 钓鱼</h3><p>服务端未对传入的跳转 url 变量进行检查和控制，可能导致可恶意构造任意一个恶意地址，诱导用户跳转到恶意网站。由于是从可信的站点跳转出去的，用户会比较信任，所以跳转漏洞一般用于钓鱼攻击，通过转到恶意网站欺骗用户输入用户名和密码盗取用户信息，或欺骗用户进行金钱交易；也可能引发的 XSS 漏洞（主要是跳转常常使用 302 跳转，即设置 HTTP 响应头，Locatioin: url，如果 url 包含了 CRLF，则可能隔断了 HTTP 响应头，使得后面部分落到了 HTTP body，从而导致 XSS 漏洞）。</p><p>防御措施：在跳转的时候对 url 进行按规则校验，判断 url 是否在应用授权的白名单内。</p><h3 id="图片钓鱼" tabindex="-1"><a class="header-anchor" href="#图片钓鱼" aria-hidden="true">#</a> 图片钓鱼</h3><p>如果可以允许用户向网页里插入未经验证的外链图片，这有可能出现钓鱼风险。</p><p>比如常见的 401 钓鱼，攻击者在访问页面时，页面弹出验证页面让用户输入帐号及密码，当用户输入之后，帐号及密码就存储到了黑客的服务器中。通常这种情况会出现在 <code>&lt;img src=xxx/&gt;</code>中，系统不对 src 是否在域名白名单内进行校验。</p><p>防御措施：在 html 标签中要解析 url 的地方进行白名单校验。</p><h3 id="iframe-钓鱼" tabindex="-1"><a class="header-anchor" href="#iframe-钓鱼" aria-hidden="true">#</a> iframe 钓鱼</h3><p>iframe 钓鱼，通过内嵌 iframe 到被攻击的网页中，攻击者可以引导用户去点击 iframe 指向的危险网站，甚至遮盖，影响网站的正常功能，劫持用户的点击操作。</p><p>防御措施：加上以下代码限制网站被嵌套。</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span>window <span class="token operator">!=</span> window<span class="token punctuation">.</span>top<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span>top<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="hpp-攻击" tabindex="-1"><a class="header-anchor" href="#hpp-攻击" aria-hidden="true">#</a> HPP 攻击</h2><p>Http Parameter Pollution（HPP)，即 HTTP 参数污染攻击。在 HTTP 协议中是允许同样名称的参数出现多次，而由于应用的实现不规范，攻击者通过传播参数的时候传输 key 相同而 value 不同的参数，从而达到绕过某些防护的后果。可能导致的安全威胁有：绕过防护和参数校验；产生逻辑漏洞和报错，影响应用代码执行。</p><p>防御措施：在客户端传输 key 相同而 value 不同的参数时，服务端强制使用第一个参数，因此不会导致 hpp 攻击。</p><h2 id="中间人攻击" tabindex="-1"><a class="header-anchor" href="#中间人攻击" aria-hidden="true">#</a> 中间人攻击</h2><p>在网络环节的数据传输过程中，内容请求和获取时会经过许多中间人，包括充当内容入口的浏览器、路由器厂商、WIFI提供商、通信运营商等。如果使用了代理、翻墙软件则会引入更多中间人。由于 HTTP 请求的路径、参数默认情况下均是明文的，因此这些中间人可以对 HTTP 请求进行监控、劫持、阻挡。</p><p>在没有 HTTPS 时，运营商可在用户发起请求时直接跳转到某个广告，或者直接改变搜索结果插入自家的广告。如果劫持代码出现了 BUG ，则直接让用户无法使用，出现白屏。</p><p>数据泄露、请求劫持、内容篡改等等问题，核心原因就在于 HTTP 是全裸式的明文请求，域名、路径和参数都被中间人们看得一清二楚。HTTPS 做的就是给请求加密，让其对用户更加安全。对于自身而言除了保障用户利益外，还可避免本属于自己的流量被挟持，以保护自身利益。</p><p>尽管 HTTPS 并非绝对安全，掌握根证书的机构、掌握加密算法的组织同样可以进行中间人形式的攻击。不过HTTPS是现行架构下最安全的解决方案，并且它大幅增加了中间人攻击的成本。</p><p>防御措施：把网站升级到 HTTPS。</p><h2 id="防御总结" tabindex="-1"><a class="header-anchor" href="#防御总结" aria-hidden="true">#</a> 防御总结</h2><p>XSS 攻击：前端过滤用户输入，后端过滤前端传的数据。</p><p>CSRF 攻击：前后端接口做签名并设置过期时间，referer 检验，封 IP，锁 IP。</p><p>钓鱼攻击：对第三方跳转链接进行白名单校验，限制网站被嵌套。</p><p>HPP 攻击：服务端强制使用第一个参数。</p><p>中间人攻击：网站升级为 HTTPS。</p><h2 id="ssl-安全检测" tabindex="-1"><a class="header-anchor" href="#ssl-安全检测" aria-hidden="true">#</a> SSL 安全检测</h2><p>服务端 SSL 支持检测：https://www.ssllabs.com/ssltest/index.html</p><p>本地 SSLv3 支持检测：https://www.ssllabs.com/ssltest/viewMyClient.html</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/cjm0/blog.git/edit/master/docs/page/node/security.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.6da7124e.js" defer></script>
  </body>
</html>
