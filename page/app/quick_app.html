<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-beta.49">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <meta name="keywords" content="前端一锅煮,快应用开发入门"><link rel="icon" href="/img/logo.jpg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black"><meta name="msapplication-TileColor" content="#000000"><title>快应用开发入门 | 前端一锅煮</title><meta name="description" content="快应用开发入门">
    <link rel="modulepreload" href="/blog/assets/app.6da7124e.js"><link rel="modulepreload" href="/blog/assets/quick_app.html.369ea008.js"><link rel="modulepreload" href="/blog/assets/quick_app.html.fe111499.js"><link rel="prefetch" href="/blog/assets/index.html.6d01a2cb.js"><link rel="prefetch" href="/blog/assets/index.html.c356b4a5.js"><link rel="prefetch" href="/blog/assets/cola.html.e4806231.js"><link rel="prefetch" href="/blog/assets/webview.html.8973f23c.js"><link rel="prefetch" href="/blog/assets/add.html.6ca15e66.js"><link rel="prefetch" href="/blog/assets/base_summary.html.110ffd64.js"><link rel="prefetch" href="/blog/assets/fn.html.470922ad.js"><link rel="prefetch" href="/blog/assets/promise_all.html.503af5ab.js"><link rel="prefetch" href="/blog/assets/prototype.html.c216cc4e.js"><link rel="prefetch" href="/blog/assets/three.html.c55c611a.js"><link rel="prefetch" href="/blog/assets/bfc.html.12f2f1e5.js"><link rel="prefetch" href="/blog/assets/css_layout_two.html.ba63e39b.js"><link rel="prefetch" href="/blog/assets/ai.html.8d3a8611.js"><link rel="prefetch" href="/blog/assets/index.html.f249b277.js"><link rel="prefetch" href="/blog/assets/aglie.html.f8897adf.js"><link rel="prefetch" href="/blog/assets/app.html.4b9ec687.js"><link rel="prefetch" href="/blog/assets/code_review.html.bc3a99c0.js"><link rel="prefetch" href="/blog/assets/confidence.html.0d77def2.js"><link rel="prefetch" href="/blog/assets/discipline.html.12aa4483.js"><link rel="prefetch" href="/blog/assets/feday.html.43f3a4ee.js"><link rel="prefetch" href="/blog/assets/love.html.2dcaf6fa.js"><link rel="prefetch" href="/blog/assets/money_rate.html.280fa8d1.js"><link rel="prefetch" href="/blog/assets/need_work.html.9fd86d8c.js"><link rel="prefetch" href="/blog/assets/plan.html.55213dc7.js"><link rel="prefetch" href="/blog/assets/soul.html.768e71af.js"><link rel="prefetch" href="/blog/assets/think.html.70b05155.js"><link rel="prefetch" href="/blog/assets/time.html.79f32616.js"><link rel="prefetch" href="/blog/assets/index.html.11af586a.js"><link rel="prefetch" href="/blog/assets/emoji.html.b9989d2d.js"><link rel="prefetch" href="/blog/assets/es6.html.13ed4360.js"><link rel="prefetch" href="/blog/assets/fe.html.3b3d8617.js"><link rel="prefetch" href="/blog/assets/fe_design.html.d5b0b873.js"><link rel="prefetch" href="/blog/assets/fe_server_check.html.4d7b9142.js"><link rel="prefetch" href="/blog/assets/fe_server_name.html.752ce7ca.js"><link rel="prefetch" href="/blog/assets/fe_up.html.29040e77.js"><link rel="prefetch" href="/blog/assets/npm.html.e72aa54c.js"><link rel="prefetch" href="/blog/assets/npm_run.html.98aaa461.js"><link rel="prefetch" href="/blog/assets/project_template.html.288c3dcc.js"><link rel="prefetch" href="/blog/assets/serviceWorker.html.4000b715.js"><link rel="prefetch" href="/blog/assets/sh.html.5f1c0c24.js"><link rel="prefetch" href="/blog/assets/source_link.html.e2fe27e1.js"><link rel="prefetch" href="/blog/assets/sso.html.1d80181a.js"><link rel="prefetch" href="/blog/assets/ts.html.cd7c6443.js"><link rel="prefetch" href="/blog/assets/underline.html.4767bdd2.js"><link rel="prefetch" href="/blog/assets/updateService.html.e5b5e0fd.js"><link rel="prefetch" href="/blog/assets/webpack4.html.ad53dad8.js"><link rel="prefetch" href="/blog/assets/http.html.c0b3835f.js"><link rel="prefetch" href="/blog/assets/loop.html.7ee50776.js"><link rel="prefetch" href="/blog/assets/onion.html.0b6e071f.js"><link rel="prefetch" href="/blog/assets/perf.html.e8293673.js"><link rel="prefetch" href="/blog/assets/power.html.8c0a01bb.js"><link rel="prefetch" href="/blog/assets/process.html.621f9d31.js"><link rel="prefetch" href="/blog/assets/security.html.80097fc7.js"><link rel="prefetch" href="/blog/assets/v8.html.ea1267dc.js"><link rel="prefetch" href="/blog/assets/hb.html.183ccde9.js"><link rel="prefetch" href="/blog/assets/read.html.83444f6d.js"><link rel="prefetch" href="/blog/assets/mac.html.c363b9d0.js"><link rel="prefetch" href="/blog/assets/mac_down.html.4d7a51b5.js"><link rel="prefetch" href="/blog/assets/maclist.html.7fcc92e6.js"><link rel="prefetch" href="/blog/assets/vscode.html.35f0b950.js"><link rel="prefetch" href="/blog/assets/vue_reload.html.50a70fdb.js"><link rel="prefetch" href="/blog/assets/vue_ui_contrast.html.c0f397da.js"><link rel="prefetch" href="/blog/assets/api.html.3ccaacf2.js"><link rel="prefetch" href="/blog/assets/config.html.4b16ab9d.js"><link rel="prefetch" href="/blog/assets/guide.html.f8df3fc6.js"><link rel="prefetch" href="/blog/assets/theme.html.a17dc900.js"><link rel="prefetch" href="/blog/assets/404.html.ab74ef0a.js"><link rel="prefetch" href="/blog/assets/index.html.0888740a.js"><link rel="prefetch" href="/blog/assets/index.html.ccc41012.js"><link rel="prefetch" href="/blog/assets/cola.html.8bdcad90.js"><link rel="prefetch" href="/blog/assets/webview.html.4d28ba0d.js"><link rel="prefetch" href="/blog/assets/add.html.35f80863.js"><link rel="prefetch" href="/blog/assets/base_summary.html.908bfee7.js"><link rel="prefetch" href="/blog/assets/fn.html.ef8c25e1.js"><link rel="prefetch" href="/blog/assets/promise_all.html.7cc3c39b.js"><link rel="prefetch" href="/blog/assets/prototype.html.f3efd717.js"><link rel="prefetch" href="/blog/assets/three.html.62508157.js"><link rel="prefetch" href="/blog/assets/bfc.html.378b7eb8.js"><link rel="prefetch" href="/blog/assets/css_layout_two.html.4236999d.js"><link rel="prefetch" href="/blog/assets/ai.html.e4065256.js"><link rel="prefetch" href="/blog/assets/index.html.e4ef4543.js"><link rel="prefetch" href="/blog/assets/aglie.html.e7dccfaf.js"><link rel="prefetch" href="/blog/assets/app.html.b2b12e5c.js"><link rel="prefetch" href="/blog/assets/code_review.html.2cf45649.js"><link rel="prefetch" href="/blog/assets/confidence.html.44a61c4b.js"><link rel="prefetch" href="/blog/assets/discipline.html.15f00bd9.js"><link rel="prefetch" href="/blog/assets/feday.html.f553c0b8.js"><link rel="prefetch" href="/blog/assets/love.html.3a5a52d3.js"><link rel="prefetch" href="/blog/assets/money_rate.html.b84ac952.js"><link rel="prefetch" href="/blog/assets/need_work.html.f96a41de.js"><link rel="prefetch" href="/blog/assets/plan.html.843657a6.js"><link rel="prefetch" href="/blog/assets/soul.html.cfb53fae.js"><link rel="prefetch" href="/blog/assets/think.html.1c980e83.js"><link rel="prefetch" href="/blog/assets/time.html.ae37d48b.js"><link rel="prefetch" href="/blog/assets/index.html.32c2cb21.js"><link rel="prefetch" href="/blog/assets/emoji.html.9f90cc4b.js"><link rel="prefetch" href="/blog/assets/es6.html.19402800.js"><link rel="prefetch" href="/blog/assets/fe.html.829d0ed8.js"><link rel="prefetch" href="/blog/assets/fe_design.html.0ebf9f0f.js"><link rel="prefetch" href="/blog/assets/fe_server_check.html.4683b7b1.js"><link rel="prefetch" href="/blog/assets/fe_server_name.html.4509d936.js"><link rel="prefetch" href="/blog/assets/fe_up.html.dbd34ebc.js"><link rel="prefetch" href="/blog/assets/npm.html.18fcb0c1.js"><link rel="prefetch" href="/blog/assets/npm_run.html.e7bf9355.js"><link rel="prefetch" href="/blog/assets/project_template.html.9d409a08.js"><link rel="prefetch" href="/blog/assets/serviceWorker.html.c831498e.js"><link rel="prefetch" href="/blog/assets/sh.html.3eac8d25.js"><link rel="prefetch" href="/blog/assets/source_link.html.ddd0787b.js"><link rel="prefetch" href="/blog/assets/sso.html.1c880d53.js"><link rel="prefetch" href="/blog/assets/ts.html.14acd559.js"><link rel="prefetch" href="/blog/assets/underline.html.89d47386.js"><link rel="prefetch" href="/blog/assets/updateService.html.c0e25538.js"><link rel="prefetch" href="/blog/assets/webpack4.html.fbb2a1be.js"><link rel="prefetch" href="/blog/assets/http.html.bade9cd1.js"><link rel="prefetch" href="/blog/assets/loop.html.6be584fc.js"><link rel="prefetch" href="/blog/assets/onion.html.7057f780.js"><link rel="prefetch" href="/blog/assets/perf.html.c6e11b1b.js"><link rel="prefetch" href="/blog/assets/power.html.600609ae.js"><link rel="prefetch" href="/blog/assets/process.html.ce6edbf4.js"><link rel="prefetch" href="/blog/assets/security.html.d44ee077.js"><link rel="prefetch" href="/blog/assets/v8.html.a2ea5e36.js"><link rel="prefetch" href="/blog/assets/hb.html.a487989f.js"><link rel="prefetch" href="/blog/assets/read.html.69d44037.js"><link rel="prefetch" href="/blog/assets/mac.html.66f12713.js"><link rel="prefetch" href="/blog/assets/mac_down.html.cf3721e9.js"><link rel="prefetch" href="/blog/assets/maclist.html.282230ed.js"><link rel="prefetch" href="/blog/assets/vscode.html.a96c48ed.js"><link rel="prefetch" href="/blog/assets/vue_reload.html.79fd663c.js"><link rel="prefetch" href="/blog/assets/vue_ui_contrast.html.44daba36.js"><link rel="prefetch" href="/blog/assets/api.html.f52ab485.js"><link rel="prefetch" href="/blog/assets/config.html.5ee8988d.js"><link rel="prefetch" href="/blog/assets/guide.html.7d6e4938.js"><link rel="prefetch" href="/blog/assets/theme.html.ada8587b.js"><link rel="prefetch" href="/blog/assets/404.html.fa4ec67a.js"><link rel="prefetch" href="/blog/assets/404.389b8e98.js"><link rel="prefetch" href="/blog/assets/Layout.bbf94219.js"><link rel="prefetch" href="/blog/assets/vEmoji.f4f2da1c.js"><link rel="prefetch" href="/blog/assets/vHome.915a7d14.js"><link rel="prefetch" href="/blog/assets/vLife.c0039bb2.js"><link rel="prefetch" href="/blog/assets/vList.efc7a95f.js"><link rel="prefetch" href="/blog/assets/index.0e8935cb.js">
    <link rel="stylesheet" href="/blog/assets/style.04020ca0.css">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container"><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/blog/" class=""><!----><span class="site-name can-hide">前端一锅煮</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/list/" class="" aria-label="技术文章"><!--[--><!--]--> 技术文章 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/life/" class="" aria-label="生活感悟"><!--[--><!--]--> 生活感悟 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/about/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="VuePress笔记"><span class="title">VuePress笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="VuePress笔记"><span class="title">VuePress笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/guide" class="" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/api" class="" aria-label="语法"><!--[--><!--]--> 语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/config" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/theme" class="" aria-label="主题"><!--[--><!--]--> 主题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/cjm0/blog.git" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="切换颜色模式"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><div id="docsearch-container"></div></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/blog/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/list/" class="" aria-label="技术文章"><!--[--><!--]--> 技术文章 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/life/" class="" aria-label="生活感悟"><!--[--><!--]--> 生活感悟 <!--[--><!--]--></a></div><div class="navbar-item"><a href="/blog/page/about/" class="" aria-label="关于我"><!--[--><!--]--> 关于我 <!--[--><!--]--></a></div><div class="navbar-item"><div class="navbar-dropdown-wrapper"><button class="navbar-dropdown-title" type="button" aria-label="VuePress笔记"><span class="title">VuePress笔记</span><span class="arrow down"></span></button><button class="navbar-dropdown-title-mobile" type="button" aria-label="VuePress笔记"><span class="title">VuePress笔记</span><span class="right arrow"></span></button><ul style="display:none;" class="navbar-dropdown"><!--[--><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/guide" class="" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/api" class="" aria-label="语法"><!--[--><!--]--> 语法 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/config" class="" aria-label="配置"><!--[--><!--]--> 配置 <!--[--><!--]--></a></li><li class="navbar-dropdown-item"><a href="/blog/page/vuepress/theme" class="" aria-label="主题"><!--[--><!--]--> 主题 <!--[--><!--]--></a></li><!--]--></ul></div></div><div class="navbar-item"><a class="external-link" href="https://github.com/cjm0/blog.git" rel="noopener noreferrer" target="_blank" aria-label="Github"><!--[--><!--]--> Github <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><p tabindex="0" class="sidebar-item sidebar-heading">快应用开发入门 <!----></p><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/page/app/quick_app.html#快应用介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="快应用介绍"><!--[--><!--]--> 快应用介绍 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/page/app/quick_app.html#介绍" class="router-link-active router-link-exact-active sidebar-item" aria-label="介绍"><!--[--><!--]--> 介绍 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#开发技术" class="router-link-active router-link-exact-active sidebar-item" aria-label="开发技术"><!--[--><!--]--> 开发技术 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#快速开始" class="router-link-active router-link-exact-active sidebar-item" aria-label="快速开始"><!--[--><!--]--> 快速开始 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#遇到的问题和解决办法" class="router-link-active router-link-exact-active sidebar-item" aria-label="遇到的问题和解决办法"><!--[--><!--]--> 遇到的问题和解决办法 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/page/app/quick_app.html#缺点" class="router-link-active router-link-exact-active sidebar-item" aria-label="缺点"><!--[--><!--]--> 缺点 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#遇到的问题和解决办法-1" class="router-link-active router-link-exact-active sidebar-item" aria-label="遇到的问题和解决办法"><!--[--><!--]--> 遇到的问题和解决办法 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#几点开发实践" class="router-link-active router-link-exact-active sidebar-item" aria-label="几点开发实践"><!--[--><!--]--> 几点开发实践 <!--[--><!--]--></a><ul style="display:none;" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/blog/page/app/quick_app.html#平台版本" class="router-link-active router-link-exact-active sidebar-item" aria-label="平台版本"><!--[--><!--]--> 平台版本 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#错误处理" class="router-link-active router-link-exact-active sidebar-item" aria-label="错误处理"><!--[--><!--]--> 错误处理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#性能优化" class="router-link-active router-link-exact-active sidebar-item" aria-label="性能优化"><!--[--><!--]--> 性能优化 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#数据传递" class="router-link-active router-link-exact-active sidebar-item" aria-label="数据传递"><!--[--><!--]--> 数据传递 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#快速生成多个快应用" class="router-link-active router-link-exact-active sidebar-item" aria-label="快速生成多个快应用"><!--[--><!--]--> 快速生成多个快应用 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#负一屏卡片开发" class="router-link-active router-link-exact-active sidebar-item" aria-label="负一屏卡片开发"><!--[--><!--]--> 负一屏卡片开发 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a aria-current="page" href="/blog/page/app/quick_app.html#一点感悟" class="router-link-active router-link-exact-active sidebar-item" aria-label="一点感悟"><!--[--><!--]--> 一点感悟 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="快应用开发入门" tabindex="-1"><a class="header-anchor" href="#快应用开发入门" aria-hidden="true">#</a> 快应用开发入门</h1><ul><li><p>快应用介绍</p></li><li><p>遇到的问题和解决办法</p></li><li><p>几点开发实践</p></li><li><p>一点感悟</p></li></ul><h2 id="快应用介绍" tabindex="-1"><a class="header-anchor" href="#快应用介绍" aria-hidden="true">#</a> 快应用介绍</h2><h3 id="介绍" tabindex="-1"><a class="header-anchor" href="#介绍" aria-hidden="true">#</a> 介绍</h3><p><strong>网页</strong>：网页无需安装，体验不够很好。</p><p><strong>原生应用</strong>：原生应用体验流畅，但需要从应用商店下载安装，难以一步直达用户，而且安装包比较大耗流量。</p><p><strong>快应用</strong>：深度集成在手机操作系统中，用户无需下载安装直接在手机上运行，可流畅的体验应用内容。</p><p>类似微信小程序，微信小程序嵌套在微信 app 里面，快应用嵌套在手机系统里面。</p><p>入口比较全，包括：URL 链接、全局搜索、应用商店、浏览器、负一屏、系统桌面、PUSH、语音助手、安全中心、垃圾清理、信息助手、天气、短信模板、日历、个性主题、文件管理...</p><h3 id="开发技术" tabindex="-1"><a class="header-anchor" href="#开发技术" aria-hidden="true">#</a> 开发技术</h3><p>快应用采用前端技术栈，由基本的标签、样式、js脚本等组成，与 Vue 的开发方式相近。</p><p>快应用使用 MVVM 的设计模式进行开发，开发者无需直接操作 DOM 节点的增删，利用数据驱动的方式完成节点更新。</p><p>开发实时编译渲染，完成后打包生成 rpk 包上传平台。</p><h3 id="快速开始" tabindex="-1"><a class="header-anchor" href="#快速开始" aria-hidden="true">#</a> 快速开始</h3><ol><li><p><a href="https://www.quickapp.cn/docCenter/IDEPublicity" target="_blank" rel="noopener noreferrer">安装快应用开发工具<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a></p></li><li><p>新建快应用工程 <img src="https://pic1.zhimg.com/80/v2-c8b6b4dece86e22b9ce3353b27df6ca8_1440w.jpg" alt=""></p></li><li><p>代码结构 <img src="https://pic4.zhimg.com/80/v2-8787304f0c972efb97fd9be37cf40e4f_1440w.jpg" alt=""></p></li><li><p>开发调试 <img src="https://pic4.zhimg.com/80/v2-e78947dedf8b3f5bda37f62dc44376ef_1440w.jpg" alt=""></p></li><li><p>编译打包提交测试 <img src="https://pic2.zhimg.com/80/v2-005c60809d05fc8f5399b69a3a406781_1440w.jpg" alt=""></p></li><li><p>上传至官网的开发者中心，提交审核发布</p></li></ol><h2 id="遇到的问题和解决办法" tabindex="-1"><a class="header-anchor" href="#遇到的问题和解决办法" aria-hidden="true">#</a> 遇到的问题和解决办法</h2><h3 id="缺点" tabindex="-1"><a class="header-anchor" href="#缺点" aria-hidden="true">#</a> 缺点</h3><p>真实开发体验感受到的问题：</p><ul><li><p>开发工具属于简易版的 VS Code，容易卡顿，偶尔会出现诡异的问题</p></li><li><p>api 未全部统一，各家厂商都有部分私有的api和功能</p></li><li><p>官方文档不全，不够详细</p></li><li><p>更新迭代慢，基础功能够用，更细节的功能不够全</p></li><li><p>社区不繁荣，较少更新维护</p></li><li><p>应用量和开发者较少导致文档和相关资料少，遇到问题很难找到可借鉴的解决方案</p></li></ul><h3 id="遇到的问题和解决办法-1" tabindex="-1"><a class="header-anchor" href="#遇到的问题和解决办法-1" aria-hidden="true">#</a> 遇到的问题和解决办法</h3><p><strong>1. 开发工具运行卡顿</strong></p><p>现象：长时间运行快应用开发工具会变卡顿。</p><p>解决：可以退出杀死快应用开发工具，然后重新打开。</p><p><strong>2. 开发工具运行报错</strong></p><p>现象：初次安装报错，开发过程报错，偶发编译报错。</p><p>解决：查看右侧预览报错信息 =&gt; 查看底部输出的报错信息 =&gt; onError 监听 =&gt; 代码二分法排查 =&gt; 重启开发工具 =&gt; 重启电脑</p><p>说明：</p><ul><li><p>常规明显的错误右侧预览会提示</p></li><li><p>组件内部报错整个组件会渲染失败，可查看调试器输出查问题</p></li><li><p><code>onError</code> 全局监听，用 <code>prompt.showDialog</code> 弹出全局报错</p></li><li><p>异常页面通过二分法依次对半隐藏代码找到错误</p></li><li><p>未发现异常或者 <code>$app</code>、<code>$def</code>、自定义的 <code>$config</code> 不存在报错，清除缓存重新编译，不行再重启开发工具，再不行重启电脑</p></li></ul><p><strong>3. 生命周期函数执行问题</strong></p><p>页面执行顺序 <code>onInit =&gt; onReady =&gt; onShow</code></p><p>自定义组件只有 <code>onInit =&gt; onReady</code></p><p>现象：加载过一次的页面返回再进入只会执行 <code>onShow</code>，此时页面中自定义组件生命周期函数不会执行。</p><p>解决：加上 <code>if</code> 并在页面 <code>onShow</code> 中修改为 false，100ms 后为改为 true，强制子组件刷新。</p><p><strong>4. 定位不支持 <code>z-index</code> 控制层级</strong></p><p>现象：<code>z-index</code> 无效，多个 <code>position</code> 定位元素互相覆盖时，谁后面渲染谁就在上层。</p><p>解决：用 <code>stack</code> 组件替代，<code>stack</code> 容器子组件排列方式为层叠排列，每个直接子组件按照先后顺序依次堆叠，覆盖前一个子组件；用代码逻辑控制要显示在最上层的最后去渲染。</p><p><strong>5. 私有自动登录 api 导致预览无法使用</strong></p><p>现象：使用了 oppo 私有的自动登录 api，模块不存在报错导致开发者工具右侧预览失败，无法实时开发调试。</p><p>解决：封装登录方法，引入参数控制调试阶段用写死的登录 token，不走私有登录 api。</p><p><strong>6. 页面栈过多数据被销毁</strong></p><p>现象：阅读页和详情页因为 id 不一样每次都会产生新的页面栈，页面栈的数量超过 5个，缓存在内存里的最早页面数据会被销毁，一般表现就是首页会变空白，因为最先进的是首页。</p><p>解决：阅读页和详情页这种带 id 的页面用 <code>router.replace</code> 替换 <code>router.push</code>；监听页面栈数量超过 5个记录一下，在回到首页的时候重新加载数据。</p><p><strong>7. 计时器问题</strong></p><p>现象：计时器内函数执行报错 <code>this</code> 找不到，A页面跳转到B，后台继续监听A页面计时器，到点执行计时器，此时A页面已被销毁，报错。</p><p>解决：给 <code>Function</code> 增加 <code>bindPage</code> 方法，在 <code>bindPage</code> 里面判断页面存在才执行函数，所有计时器都用以下方法：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">bindPageLC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bindPage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">vmInst</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vmInst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;使用错误：请传递VM对象&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>vmInst<span class="token punctuation">.</span>$valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>vmInst<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;页面销毁时，不执行回调函数&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token function">bindPageLC</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bindPage</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>8. 系统字体设置变化导致内容错位</strong></p><p>现象：手动修改系统字体大小，未做适配导致页面错位，目前未提供相关 api 能监听到系统字体大小变化导致。</p><p>解决：<code>manifest.json</code> 关闭字体大小响应 <code>&quot;textSizeAdjust&quot;: &quot;none&quot;</code>。</p><p><strong>9. 系统显示设置变化导致内容错位</strong></p><p>现象：手动修改系统显示大小，使用富文本容器内嵌html元素的会变大错位。<code>&quot;textSizeAdjust&quot;: &quot;none&quot;</code> 只能关闭不响应系统字体变化。</p><p>解决：不使用富文本容器内嵌 html，改用 <code>div</code>、<code>text</code> 等组件。</p><p><strong>10. 屏幕适配</strong></p><p>快应用和负一屏卡片默认尺寸都是 <code>&quot;designWidth&quot;: 750</code>，使用 750 的设计图可 1:1 写样式；</p><p>如果 <code>&quot;designWidth&quot;: 1080</code>，375 的图需要乘以 3，可以在公共样式里定义变量，<code>@3:3px;</code>；</p><p>具体使用则：<code>height: 156*@3;padding: 16*@3 16*@3 0;</code>。</p><p><strong>11. 夜间适配</strong></p><p>现象：监听夜间模式然后变换最外层样式去更换颜色，发现不起作用，需要每个元素都单独换样式才有效。</p><p>解决：快应用可以夜间媒体查询适配 <code>@media (prefers-color-scheme: dark) {}</code>。</p><p><code>manifest.json</code> 中 <code>&quot;themeMode&quot;: -1,</code> 跟随主题色，<code>&quot;forceDark&quot;: true,</code> 开启反色</p><p>图片暗夜 src 替换：监听主题模式切换 <code>onConfigurationChanged</code>，获取当前的主题模式 <code>configuration.getThemeMode()</code></p><p>组件单独关闭反色：<code>forcedark=&quot;false&quot;</code></p><p>自定义样式：用媒体查询适配 <code>@media (prefers-color-scheme: dark) {}</code></p><p><strong>12. 阅读页竖翻模式 1.0 广告问题</strong></p><p>现象：多个广告组件 <code>for</code> 循环，绑定 <code>appear</code> 触发加载，每个组件会多次触发 <code>appear</code> 事件；广告组件<code>onLoad</code>回调会触发多次。</p><p>解决：加索引缓存过滤掉已加载过的组件；广告对象抽离到外部共同引用，传数据到广告组件里面去渲染数据，做数据缓存过滤。</p><p><strong>13. 2.0 原生广告注意点</strong></p><p>加载：最外层通过 <code>if</code> 重新渲染加载新广告</p><p>成功：返回的数据不再有广告 id</p><p>点击：广告曝光和点击只会触发1次，再次点击不会触发广告点击上报，无收益；触发广告跳转区域不能用 <code>if</code> 控制，否则点击无任何反应，用 <code>show</code> 控制</p><p>关闭：自定义关闭广告元素用 <code>show</code>，不用 <code>if</code>，这样就不会跳转到广告链接</p><p><strong>14. 安全审核问题</strong></p><p><code>loglevel</code> 需设置为 <code>off</code>；</p><p>未同意隐私协议前存在联网行为：所有请求在同意协议后再发；</p><p>不允许存在 <code>http</code> 链接：对接口下发的链接全部转换成 <code>https</code>，接口链接支持 <code>http</code> 和 <code>https</code>，部分下发的还是 <code>http</code>；</p><p>代码中不允许存在硬编码 <code>IP</code>：可拼接使用；</p><p><code>storage</code> 不允许明文储存敏感信息，比如昵称、手机号等：可用 <code>cipher.aes()</code> 加密储存。</p><h2 id="几点开发实践" tabindex="-1"><a class="header-anchor" href="#几点开发实践" aria-hidden="true">#</a> 几点开发实践</h2><h3 id="平台版本" tabindex="-1"><a class="header-anchor" href="#平台版本" aria-hidden="true">#</a> 平台版本</h3><p>快应用覆盖式更新，平台版本可升级到 1100 最新版</p><h3 id="错误处理" tabindex="-1"><a class="header-anchor" href="#错误处理" aria-hidden="true">#</a> 错误处理</h3><ol><li>JSON.parse 解析报错处理</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">parseJSON</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> rawParse <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span>parse
  <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function-variable function">parse</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">str<span class="token punctuation">,</span> defaults</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">try</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token function">rawParse</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">JSON 解析失败：</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>str<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>err<span class="token punctuation">.</span>stack<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span>
      <span class="token keyword">return</span> defaults
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li>通过 $valid 判断页面状态，解决回调函数中引用 this 数据报错</li></ol><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> <span class="token function-variable function">bindPageLC</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token class-name">Function</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">bindPage</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">vmInst</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> fn <span class="token operator">=</span> <span class="token keyword">this</span>
    <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>vmInst<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&#39;使用错误：请传递VM对象&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
      <span class="token keyword">if</span> <span class="token punctuation">(</span>vmInst<span class="token punctuation">.</span>$valid<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>vmInst<span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
      <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">&#39;页面销毁时，不执行回调函数&#39;</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>错误页面</li></ol><p>监听 <code>onPageNotFound</code>，当页面跳转异常时跳转到自定义错误页面，加埋点上报</p><ol start="4"><li>全局报错监听</li></ol><p>监听<code>onError</code>应用报错，应用捕获异常时调用，加埋点上报</p><ol start="5"><li>后端服务器接口请求失败上报</li></ol><h3 id="性能优化" tabindex="-1"><a class="header-anchor" href="#性能优化" aria-hidden="true">#</a> 性能优化</h3><p><strong>1. 全局挂载公共函数</strong></p><p><code>global.$config</code> 挂载公共静态配置数据：<code>$config.bpImg</code></p><p><code>global.$utils</code> 挂载纯函数以及部分系统api的封装：<code>$utils.formatDate()</code></p><p><code>app.ux</code> 挂载封装的快应用方法函数：<code>this.$app.$def.login</code></p><p><strong>2. 合理嵌套 html</strong></p><p>html 层级不要超过 28 层，否则会警告；标签要闭合，否则不会报错但是渲染的判断逻辑会不起作用，出现诡异 bug</p><p><strong>3. 合理使用 css 选择器</strong></p><p>css 样式嵌套层级越深，单次匹配耗时越长</p><p>避免使用组件（比如 text）名称作为最后一项匹配规则，否则每个 text 组件渲染时都会遍历匹配一次</p><p>从右到左匹配，最后一位样式名尽量唯一，较少匹配次数</p><p><strong>4. 简化 ViewModel 数据</strong></p><p>快应用会对赋值的响应式数据中每个属性进行递归式的定义，属性个数的定义越少越好</p><p>所以针对数组类型数据，赋值时可过滤掉不需要用到的对象属性</p><p><strong>5. 使用懒加载</strong></p><p><code>list</code> 组件中，不在屏幕之内的 <code>list-item</code> 可以在滑动时加载更多，完成渲染</p><p><code>tabs</code> 组件中，非当前显示的页签内容，可以在用户点击页签时完成渲染（借助if指令控制tab-content组件的子节点）</p><h3 id="数据传递" tabindex="-1"><a class="header-anchor" href="#数据传递" aria-hidden="true">#</a> 数据传递</h3><p><strong>1. 父子组件传数据</strong></p><p>父组件：<code>props</code> &lt;==&gt; 子组件：<code>$emit()</code> 触发绑定的自定义事件</p><p>子组件：<code>$dispatch()</code> 触发自定义事件 &lt;==&gt; 父组件：<code>$on()</code> 监控自定义事件，向外传递</p><p>父组件：<code>$broadcast()</code> 触发自定义事件 &lt;==&gt; 子组件：<code>$on()</code> 监控自定义事件，向内传递</p><p><strong>2. 兄弟组件传数据</strong></p><p>自己写一个提供发布订阅能力的 JS，然后各个 <code>ViewModel</code> 引入这个JS文件</p><p>或者将其挂载在页面级别的 <code>ViewModel</code>，子组件通过 <code>$root</code> 引用到页面级别的 <code>ViewModel</code></p><p>父组件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">import</span> <span class="token punctuation">{</span>
    createOrRetrieveInst
  <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;./pubsub.js&#39;</span>

  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">onReady</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 实例化：并绑定在VM上</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pubsubModel <span class="token operator">=</span> <span class="token function">createOrRetrieveInst</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

      <span class="token comment">// 2. 订阅：其它VM也可以调用</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pubsubModel<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;count-add&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">vArg0<span class="token punctuation">,</span> vArg1</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 3. 发布：其它VM也可以调用</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>pubsubModel<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;count-add&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;arg0&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;arg1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>子组件</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token operator">&lt;</span>script<span class="token operator">&gt;</span>
  <span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">{</span>
    <span class="token function">onReady</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token comment">// 1. 订阅</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$root<span class="token punctuation">.</span>pubsubModel<span class="token punctuation">.</span><span class="token function">subscribe</span><span class="token punctuation">(</span><span class="token string">&#39;count-add&#39;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">vArg0<span class="token punctuation">,</span> vArg1</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token operator">...</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>

      <span class="token comment">// 2. 发布</span>
      <span class="token keyword">this</span><span class="token punctuation">.</span>$root<span class="token punctuation">.</span>pubsubModel<span class="token punctuation">.</span><span class="token function">publish</span><span class="token punctuation">(</span><span class="token string">&#39;count-add&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token string">&#39;arg0&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;arg1&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>script<span class="token operator">&gt;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>3. 跨层级传数据</strong></p><p><code>app.ux</code> 中：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>  <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dataCache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 初始化 app 缓存的数据</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">getAppData</span><span class="token punctuation">(</span><span class="token parameter">key</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 获取 app 缓存的数据</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>dataCache<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">setAppData</span><span class="token punctuation">(</span><span class="token parameter">key<span class="token punctuation">,</span> val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 设置 app 缓存的数据</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>dataCache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> val
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>使用：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// 任意页面设置</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$app<span class="token punctuation">.</span><span class="token function">setAppData</span><span class="token punctuation">(</span><span class="token string">&#39;adbooks&#39;</span><span class="token punctuation">,</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>adBook<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 任意页面获取</span>
<span class="token keyword">this</span><span class="token punctuation">.</span>$app<span class="token punctuation">.</span><span class="token function">getAppData</span><span class="token punctuation">(</span><span class="token string">&#39;adbooks&#39;</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="快速生成多个快应用" tabindex="-1"><a class="header-anchor" href="#快速生成多个快应用" aria-hidden="true">#</a> 快速生成多个快应用</h3><p>需求：一个快应用为主，衍生出多个换肤、换图、换问题的快应用</p><p>解决：用命令行复制新的配置去覆盖现有配置再打包，配置项文件 <code>manifest.json</code>、<code>variables.less</code>、公共 <code>config.js</code></p><h3 id="负一屏卡片开发" tabindex="-1"><a class="header-anchor" href="#负一屏卡片开发" aria-hidden="true">#</a> 负一屏卡片开发</h3><ol><li><p>新版负一屏卡片整体空间完全自定义，包括 logo、标题、刷新频率，每次滑到负一屏就会触发1次 <code>onShow</code></p></li><li><p>卡片加载有系统 loading，自己不需要再加 loading，否则2个 loading 会冲突，加载中间态要用骨架屏</p></li><li><p>缓存读取问题：负一屏卡片要读取快应用 <code>storage</code> 缓存，包名必须一致，不能独立建包，要把卡片嵌在快应用中，然后在管理平台创建智慧服务即可</p></li><li><p>console 查看</p></li></ol><ul><li>电脑安装 <code>adb</code></li><li>brew cask install android-platform-tools</li><li><code>adb logcat -c</code> 清除log缓存信息</li><li><code>adb logcat -v time &gt;./log.log</code> 写入日志，然后在日志文件中找信息</li></ul><ol start="5"><li>夜间适配</li></ol><ul><li>必须适配夜间模式</li><li>不支持媒体查询 <code>@media (prefers-color-scheme: dark) {}</code></li><li>根据获取的当前题模式值去动态修改每个组件样式</li></ul><h2 id="一点感悟" tabindex="-1"><a class="header-anchor" href="#一点感悟" aria-hidden="true">#</a> 一点感悟</h2><p>做完一个周期的快应用项目，对比静态页面、jq、vue、react、小程序、uni-app、electron以及各种衍生的组件库</p><p>核心还是三个东西，html 页面结构、css 样式、js 逻辑：</p><ul><li>html 页面结构这块写法、优化、注意项都差不多</li><li>css 写法也一样（除了 react 的 css in js 写法），掌握一套完整的样式写法基本能搞定常规业务</li><li>js 核心逻辑写法也是一样的</li></ul><p>然后会发现各种项目的脚手架、项目结构、使用方法也都差不多，到最后写的最多的始终是业务逻辑。</p><p>这里就可以整理出一整套自己的项目开发方法然后持续复用：包括项目结构、文件命名、html 结构、css 命名和写法、js 常规方法、api 调用方法、说明文档、eslint 规则等配置项等等。</p><p>举其中一个点：</p><p>经常会用到的消息提示弹窗</p><p>element：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$message</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;这是一条消息提示&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;info&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>vant：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">$notify</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;这是一条消息提示&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">type</span><span class="token operator">:</span> <span class="token string">&#39;danger&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3000</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>antd：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>message<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;这是一条消息提示&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
message<span class="token punctuation">.</span><span class="token function">loading</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">content</span><span class="token operator">:</span> <span class="token string">&#39;这是一条消息提示&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
  <span class="token operator">...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>微信小程序：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>wx<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;成功&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;success&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>uni-app：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>uni<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token literal-property property">title</span><span class="token operator">:</span> <span class="token string">&#39;这是一条消息提示&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">icon</span><span class="token operator">:</span> <span class="token string">&#39;success&#39;</span><span class="token punctuation">,</span>
	<span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">1500</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>快应用：</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>prompt<span class="token punctuation">.</span><span class="token function">showToast</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">message</span><span class="token operator">:</span> <span class="token string">&#39;message&#39;</span><span class="token punctuation">,</span>
  <span class="token literal-property property">duration</span><span class="token operator">:</span> <span class="token number">0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这些框架、组件库基本用法和原理是类似的，最大的区别在于 api 的命名以及参数的差异，每个都去记住费劲又费记忆。</p><p>这里就可以重新封装这个 api，比如统一成 <code>$utils.showToast()</code>，这样始终记住这一个就够了。</p><p>可以封装的功能包括：各种反馈弹窗、登录退出注销、支付、缓存存储、埋点函数、各框架提供的系统调用方法等。</p><p>把常用的重新封一遍再用，可以进一步磨平差异，减轻记忆负担。</p><p>我的分享到此完毕，感谢阅读，谢谢~</p></div><!--[--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/cjm0/blog.git/edit/master/docs/page/app/quick_app.md" rel="noopener noreferrer" target="_blank" aria-label="在 GitHub 上编辑此页"><!--[--><!--]--> 在 GitHub 上编辑此页 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">上次更新: </span><!----></div><!----></footer><!----><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/blog/assets/app.6da7124e.js" defer></script>
  </body>
</html>
